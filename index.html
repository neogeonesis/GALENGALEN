<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Web Arrastrable con Revelado</title>

    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #ffffff; /* Fondo blanco */
            height: 100vh;
            overflow: hidden; 
            font-family: 'Courier New', Courier, monospace;
        }

        .draggable {
            position: absolute; 
            cursor: grab;
            /* Estos estilos se mantienen para las cajas de texto */
            background: white;
            padding: 10px;
            border: none; 
            box-shadow: none; 
            user-select: none;
            width: fit-content;
        }

        .draggable:active {
            cursor: grabbing;
            background-color: #f0f0f0; 
        }

        /* --- NUEVOS ESTILOS PARA EL EFECTO DE REVELADO --- */

        .image-container {
            /* Contenedor que establece el tamaño de la imagen */
            width: 200px;
            height: 200px;
            position: relative; /* Necesario para posicionar las capas */
            overflow: hidden; /* Oculta la parte del visor que sale del borde */
        }
        
        .grayscale-image {
            /* La capa inferior: imagen en escala de grises (por defecto) */
            filter: grayscale(100%);
            transition: filter 0.3s ease; /* Transición suave al pasar el ratón */
        }

        .color-reveal {
            /* El visor (la capa superior a color) */
            position: absolute;
            top: 0;
            left: 0;
            width: 200px;
            height: 200px;
            /* Máscara circular para el efecto de revelado */
            clip-path: circle(30px at 50% 50%); 
        }

        .color-reveal img {
            /* La imagen dentro del visor (debe ser la misma que la de abajo) */
            filter: grayscale(0%);
            position: absolute;
            top: 0;
            left: 0;
            /* Evita que esta imagen se mueva dentro del visor */
            margin: 0; 
        }

        img {
            pointer-events: none; 
            display: block;
            max-width: 200px; 
            height: auto;
        }
    </style>
</head>
<body>

    <div class="draggable" id="draggableImage1" style="top: 10%; left: 10%;">
        <div class="image-container">
            <img class="grayscale-image" src="imagenes/grande1.jpg" alt="Imagen Arrastrable">
            
            <div class="color-reveal">
                <img src="imagenes/grande1.jpg" alt="Imagen a Color">
            </div>
        </div>
        <p>¡Arrastra y Revela!</p>
    </div>

    <div class="draggable" style="top: 40%; left: 50%;">
        <h3>Hola Mundo</h3>
        <p>Soy una nota flotante.</p>
    </div>

    <div class="draggable" id="draggableImage2" style="top: 20%; left: 70%;">
        <div class="image-container">
            <img class="grayscale-image" src="imagenes/grande1.jpg" alt="Imagen Arrastrable">
            
            <div class="color-reveal">
                <img src="imagenes/grande1.jpg" alt="Imagen a Color">
            </div>
        </div>
    </div>

    <script>
        const draggables = document.querySelectorAll('.draggable');
        let currentElement = null;
        let startX = 0, startY = 0, initialLeft = 0, initialTop = 0;
        let zIndexCounter = 1;

        // --- FUNCIONALIDAD DE ARRASTRE (CÓDIGO ORIGINAL) ---
        draggables.forEach(element => {
            element.addEventListener('mousedown', (e) => {
                currentElement = element;
                startX = e.clientX;
                startY = e.clientY;
                
                const rect = currentElement.getBoundingClientRect();
                initialLeft = rect.left;
                initialTop = rect.top;

                zIndexCounter++;
                currentElement.style.zIndex = zIndexCounter;
            });
        });

        document.addEventListener('mousemove', (e) => {
            if (!currentElement) return;
            e.preventDefault(); 

            const deltaX = e.clientX - startX;
            const deltaY = e.clientY - startY;

            currentElement.style.left = `${initialLeft + deltaX}px`;
            currentElement.style.top = `${initialTop + deltaY}px`;
        });

        document.addEventListener('mouseup', () => {
            currentElement = null;
        });

        // --- FUNCIONALIDAD DE REVELADO (NUEVO CÓDIGO) ---
        
        // Elementos que contienen las imágenes para el efecto
        const imageContainers = document.querySelectorAll('.image-container');

        imageContainers.forEach(container => {
            const reveal = container.querySelector('.color-reveal');
            
            container.addEventListener('mousemove', (e) => {
                // Posición relativa del ratón dentro del contenedor de la imagen
                const rect = container.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                // Mueve el círculo de clip-path (el "foco") a la posición del ratón
                reveal.style.clipPath = `circle(50px at ${x}px ${y}px)`;
            });

            container.addEventListener('mouseleave', () => {
                // Oculta el foco cuando el ratón sale
                reveal.style.clipPath = 'circle(0px at 50% 50%)';
            });
        });
    </script>

</body>
</html>

